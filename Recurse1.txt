0  S := A $
1  A := B | C
2  B := A 2
3  C := 1

S0 ('1', S1)
S1 ('2', S2) ($)
S2 ('2', S1)

1 2 $

1 2 2 $

1 1
  FAIL